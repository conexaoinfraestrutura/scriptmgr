#!/bin/bash
set -x

# - senha de acesso a base de dados
export PGPASSWORD=${BDPROD_DBSENHA_LOCAL}

# - gerando o dump da base
${DBPROD_CMDPGDUMP_LOCAL} -Fc -Z ${DBPROD_CMDPGCOMPRESSAO_LOCAL} -p ${BDPROD_DBPORTA_LOCAL} -U ${BDPROD_DBUSUARIO_LOCAL} -h ${BDPROD_DBIP_LOCAL} ${BDPROD_DBBASE_LOCAL} -f ${DBPROD_BACKUPDIR_DESTINO_LOCAL}/${DBPROD_BACKUPARQ_PREFIXO_LOCAL}_${INSTIT}_${DATA}.pgbkp

# - gerando soma md5 de integridade do arquivo
md5sum ${DBPROD_BACKUPDIR_DESTINO_LOCAL}/${DBPROD_BACKUPARQ_PREFIXO_LOCAL}_${INSTIT}_${DATA}.pgbkp > ${DBPROD_BACKUPDIR_DESTINO_LOCAL}/${DBPROD_BACKUPARQ_PREFIXO_LOCAL}_${INSTIT}_${DATA}.md5
